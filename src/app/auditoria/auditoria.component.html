<div class="page-container">
    
    <div class="header-section" style="margin-bottom: 25px; display: flex; justify-content: space-between; align-items: center;">
        <div>
            <h2 style="color: #003366; margin: 0;">üìã Reportes Globales</h2>
            <p style="color: #666; margin: 5px 0 0 0;">Historial de TDRs, Contratos y Seguridad</p>
        </div>
    </div>

    <div class="filtros-card" style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 25px;">
        
        <div style="width: 100%; margin-bottom: 20px; display: flex; gap: 10px;">
            <div style="position: relative; flex: 1;">
                <span style="position: absolute; left: 15px; top: 12px; color: #888; font-size: 16px;">üîç</span>
                <input type="text" 
                       [(ngModel)]="filtros.busqueda" 
                       (keyup.enter)="buscar()"
                       placeholder="Buscar: 'TDR-2025', '2000 d√≥lares', 'Eliminado', 'Juan'..." 
                       class="input-custom"
                       style="width: 100%; padding: 12px 12px 12px 45px; font-size: 15px; border: 1px solid #ccc; border-radius: 6px; outline: none; box-sizing: border-box;">
            </div>
            
            <button (click)="buscar()" class="btn-buscar" style="background-color: #003366; color: white; border: none; padding: 0 25px; border-radius: 6px; font-weight: bold; cursor: pointer; transition: background 0.2s;">
                BUSCAR
            </button>
        </div>

        <div style="display: flex; gap: 20px; width: 100%; flex-wrap: wrap; padding-top: 20px; border-top: 1px solid #f0f0f0;">
            
            <div class="filtro-group" style="display: flex; flex-direction: column;">
                <label style="font-size: 12px; font-weight: bold; color: #555; margin-bottom: 5px;">Desde:</label>
                <input type="date" [(ngModel)]="filtros.fechaInicio" class="input-custom" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            </div>
            
            <div class="filtro-group" style="display: flex; flex-direction: column;">
                <label style="font-size: 12px; font-weight: bold; color: #555; margin-bottom: 5px;">Hasta:</label>
                <input type="date" [(ngModel)]="filtros.fechaFin" class="input-custom" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            </div>
            
            <div class="filtro-group" style="display: flex; align-items: flex-end;">
                <button (click)="filtros.busqueda='ELIMINAR'; buscar()" 
                        style="background: #ffebee; color: #c62828; border: 1px solid #ffcdd2; padding: 9px 15px; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 13px; display: flex; align-items: center; gap: 5px;">
                    üóëÔ∏è Ver Todo lo Eliminado
                </button>
            </div>

            <div class="filtro-group" style="display: flex; align-items: flex-end;">
                <button (click)="filtros.busqueda=''; buscar()" 
                        style="background: #f8f9fa; color: #666; border: 1px solid #ddd; padding: 9px 15px; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 13px;">
                    Limpiar Filtros
                </button>
            </div>

        </div>
    </div>

    <div class="card-table" style="background: white; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); overflow: hidden;">
        
        <div *ngIf="logs.length === 0" style="text-align: center; padding: 50px; color: #888;">
            <p style="font-size: 16px; margin: 0;">üì≠ No se encontraron registros con esos criterios.</p>
        </div>

        <table class="table-custom" *ngIf="logs.length > 0" style="width: 100%; border-collapse: collapse;">
            <thead style="background-color: #003366; color: white;">
                <tr>
                    <th style="padding: 15px; text-align: left; font-size: 13px;">FECHA</th>
                    <th style="padding: 15px; text-align: left; font-size: 13px;">M√ìDULO</th>
                    <th style="padding: 15px; text-align: left; font-size: 13px;">USUARIO</th>
                    <th style="padding: 15px; text-align: center; font-size: 13px;">ACCI√ìN</th>
                    <th style="padding: 15px; text-align: left; font-size: 13px;">DETALLE DEL EVENTO</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of logs" style="border-bottom: 1px solid #f0f0f0;">
                    
                    <td style="padding: 15px; color: #555; font-size: 13px;">
                        {{ item.fecha_registro | date:'dd/MM/yyyy HH:mm' }}
                    </td>
                    
                    <td style="padding: 15px;">
                        <span style="font-size: 10px; font-weight: bold; background: #eee; color: #555; padding: 3px 8px; border-radius: 4px; text-transform: uppercase;">
                            {{ item.modulo }}
                        </span>
                    </td>
                    
                    <td style="padding: 15px; font-weight: bold; color: #003366; font-size: 13px;">
                        {{ item.usuario }}
                    </td>
                    
                    <td style="padding: 15px; text-align: center;">
                        <span [ngClass]="getBadgeClass(item.accion)" 
                              style="padding: 5px 10px; border-radius: 12px; font-size: 11px; font-weight: bold; text-transform: uppercase;">
                            {{ item.accion }}
                        </span>
                    </td>
                    
                    <td style="padding: 15px; color: #333; font-size: 14px;">
                        {{ item.detalle }}
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>